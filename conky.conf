-- vim: ts=4 sw=4 noet ai cindent syntax=lua

conky.config = {
    -- lua
    lua_load = '~/.config/conky/cpus.lua',

    -- conky settings
    background       = true,
    update_interval  = 1.0,
    double_buffer    = true,
    no_buffers       = true,
    cpu_avg_samples  = 2,
    net_avg_samples  = 2,
    out_to_console   = false,
    out_to_stderr    = false,
    temperature_unit = 'fahrenheit',

    -- window settings
    alignment     = 'top_right',
    xinerama_head = 1,
    gap_x         = -5,
    gap_y         = 5,

    --minimum_height = 900,
    minimum_width  = 220,
    maximum_width  = 220,

    own_window             = true,
    --own_window_class     = 'Conky',
    own_window_class       = 'conky-semi',
    own_window_type        = 'normal',
    own_window_hints       = 'undecorated,below,sticky,skip_taskbar,skip_pager',
    border_inner_margin    = 6,
    border_width           = 5,
    
    -- graphics settings
    draw_borders         = false,
    draw_graph_borders   = true,
    draw_outline         = true,
    draw_shades          = false,
    --default_graph_height = 15,
    --default_graph_width  = 300,
    show_graph_scale     = false,
    show_graph_range     = false,

    -- text settings
    use_xft      = true,
    uppercase    = false,
    font         = 'Ubuntu:size=10',
    --font       = 'Montserrat Regular:size=10',
    xftalpha     = 0.2,
    pad_percents = 2,

    -- other
    extra_newline    = false,
    stippled_borders = 0,
    use_spacer       = 'none',

    -- color scheme
    own_window_argb_visual = true,
    own_window_argb_value  = 0,
    own_window_transparent = false,
    own_window_colour      = '#00030e',
    default_color          = '#AAAAAA',
    default_shade_color    = '#333333',
    default_outline_color  = '#010101',
    color1                 = '#999999',  -- headings
    color2                 = '#444444',  -- graph outlines
    color3                 = '#666666',  -- horizontal lines
    color4                 = '#EEEEEE',  -- [unused]

}

-- theme from: https://github.com/kematzy/conky/tree/master/LinuxMint
-- similar one here: https://classicforum.manjaro.org/index.php?topic=2991.msg216330#msg216330

conky.text = [[
# current date
${alignr}${font :size=14}${time %A, %b %d}${font}${alignr}
${color3}${hr 2}${color} 
\
${font Montserrat Light:size=8}${color1}UPTIME: ${color}${font} ${alignr}$uptime_short
${font Montserrat Light:size=8}${color1}SYSTEM: ${color}${font} ${alignr}${execi 999999 lsb_release -ds}
${font Montserrat Light:size=8}${color1}UPDATES:${color}${font} ${alignr}${execi 3600 checkupdates | wc -l} available

# weather
${voffset -10}${font :size=11}${color1}WEATHER ${color3}${hr 2}${color}${font}
${voffset -25}${execpi 10 ~/.config/conky/weather.lua}

# CPU
${voffset -10}${font :size=11}${color1}CPU ${color3}${hr 2}${color}
${font :size=8}${color2}${execi 999999 lscpu | sed -nr ':a;s/  / /;ta; /Model name/ s/.*: (.*) @ .*/\1/p'}${color}${font}
${lua_parse conky_mycpus}
${color2}${cpugraph 15,300, 009BF9 281648 -t}${color}

# GPU
${voffset -15}${font :size=11}${color1}GPU ${color3}${hr 2}${color}
${font :size=8}${color2}${execi 999999 lspci | grep VGA | grep -o -E '\[.*\]'}${color}${font}
\
${font Montserrat Light:size=8}${color1}${goto 25}USED${goto 85}TEMP${goto 125}VRAM${color}${font}
${goto 25}${execi 5 radeontop -d- -l1 | grep -o 'gpu [0-9]\{1,3\}' | cut -c 5-7 }% \
#these (hwmon 0/1) switched between cpu/gpu  
${goto 85}${hwmon 1 temp 1}°\
${goto 125}${execi 5 radeontop -d- -l1 | grep -o 'vram [0-9]\{1,3\}' | cut -c 5-7 }%
${color2}${execigraph 2 "radeontop -d- -l1 | grep -o 'gpu [0-9]\{1,3\}' | cut -c 5-7" 009BF9 281648 -t -l}${color}

# Memory
${voffset -15}${font :size=11}${color1}MEMORY ${color3}${hr 2}${color}
${font Montserrat Light:size=8}${color1}${goto 25}USED${goto 85}of${goto 125}TOTAL${goto 185}SWAP${color}${font}
${goto 25}$mem ${goto 85}$memperc% ${goto 125}$memmax ${goto 185}$swapperc%
${color2}${memgraph 15,300, 009BF9 281648 -t}${color}

# Disks
#${voffset -15}${font :size=11}${color1}DISKS ${color3}${hr 2}${color}
#${font :size=10}${font Montserrat Light:size=8}${color1}HD HOME:${color}${font} ${goto 100}${fs_used /home} ${color2}/${color} ${fs_size /home} ${alignr} ${fs_free_perc /home}%${font}
#${font Montserrat Light:size=8}${color1}HD DATA:${color}${font} ${goto 100}${fs_used /media/kzen/DATA} ${color2}/${color} ${fs_size /media/kzen/DATA} ${alignr}${fs_free_perc /media/kzen/DATA}%
#${font Montserrat Light:size=8}${color1}DISK I/O:${color}${font} ${alignr}$diskio
#${font Montserrat Light:size=8}${color1}READ: ${color}${font} ${goto 80}${color2}${diskiograph_read  15,210 ADFF2F color4 750}${color}
#${font Montserrat Light:size=8}${color1}WRITE:${color}${font} ${goto 80}${color2}${diskiograph_write 15,210 FF0000 color5 750}${color}

#${voffset 10}${font :size=10:style=bold}FILE SYSTEM${font} ${hr 1}
##${voffset 8} ${color 7B9494}${font Weather:size=17}yz${font}${color}    ${voffset -4}Temperatur: ${color 7B9494}${hddtemp /dev/sda}°C${color}${alignr}/dev/sda
#${voffset 8}${font Poky:size=15}${color 7B9494}y${color}${font}${offset 6}${voffset -7}Root: ${font Liberation Sans:size=8}${color 7B9494}${fs_used_perc /}%${font}${color}
#${color 7B9494}${voffset 2}${fs_bar 4,20 /}${offset 8}${voffset -2}${color}Free: ${fs_free /}${alignr}Used: ${fs_used /}
#${voffset 8}${font Poky:size=15}${color 7B9494}y${color}${font}${offset 6}${voffset -7}Home: ${font Liberation Sans:size=8}${color 7B9494}${fs_used_perc /home}%${font}${color}
#${color 7B9494}${voffset 2}${fs_bar 4,20 /home}${offset 8}${voffset -2}${color}Free: ${fs_free /home}${alignr}Used: ${fs_used /home}
]]
